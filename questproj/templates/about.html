{% extends "base_site.html" %}

{% load humanize %}

{% block title %}About{% endblock %}

{% block content %}

    <h3>database</h3>
    <div>
        <p>The database is a PostgreSQL database containing {{ clue_count|intcomma }} clues.</p>
    </div>

    <h3>api</h3>
    <p>A <a href="http://en.wikipedia.org/wiki/Representational_state_transfer">RESTful</a> api interface to the clues is rendered with
        <a href="https://django-tastypie.readthedocs.org/">Tastypie</a> and
        <a href="https://github.com/PaulUithol/backbone-tastypie/">Backbone-tastypie</a>,
        with guidance from <a href="http://blog.mathandpencil.com/using-django-tastypie-to-create-RESTful-APIs/">this blog post</a>.
    </p>
    <ul id="api-samples"></ul>

    <h3>client</h3>
    <p>The main index page is a <a href="http://en.wikipedia.org/wiki/Single-page_application">single-page application</a> written with <a href="http://backbonejs.org/">Backbone.js</a> javascript framework.</p>

    <h3>horoscopes</h3>
    <p>Generated by specialized prognostical algorithm. <a href="{% url 'horoscope' %}">sample</a></p>

{% endblock %}

{% block extrajs %}

    <script type="text/javascript">
        // Write href code for each url in the list
        $(function() {
            var urls = [
                '/api/v1/?format=json',
                '/api/v1/clue?format=json',
                '/api/v1/clue/?format=json&page=7',
                '/api/v1/clue/1/?format=json',
                '/api/v1/random_clues?format=json',
                '/api/v1/clue/schema/?format=json',
                '/api/v1/clue/set/1;3/?format=json',
                '/api/v1/user_prof/1/?format=json',
                '/api/v1/user_prof/?user__username=shill&format=json'];
            for (var i=0; i < urls.length; i++) {
                $('#api-samples').append("<li><a href='" + urls[i] + "'>" + urls[i] + "</a></li>");
            }
        });
    </script>

{% endblock extrajs %}
